<!DOCTYPE html>
<html>
<head>
    <title>Google Login Test</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        .instructions {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        pre {
            background-color: #f1f1f1;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Google Login Test</h1>
    
    <div class="instructions">
        <h3>Setup Instructions:</h3>
        <ol>
            <li>Go to <a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a></li>
            <li>Create a new project or select your existing project</li>
            <li>Go to "APIs & Services" > "Credentials"</li>
            <li>Click "Create Credentials" > "OAuth client ID"</li>
            <li>Select "Web application" as the application type</li>
            <li>Add <code>http://localhost:5001</code> to "Authorized JavaScript origins"</li>
            <li>Copy your Client ID and replace <code>881718968942-f52liaqqhenc9iip6gibs8m26qdg4fm5.apps.googleusercontent.com</code> below</li>
        </ol>
    </div>

    <div id="g_id_onload"
         data-client_id="881718968942-f52liaqqhenc9iip6gibs8m26qdg4fm5.apps.googleusercontent.com"
         data-callback="handleCredentialResponse">
    </div>
    <div class="g_id_signin"
         data-type="standard"
         data-size="large"
         data-theme="outline"
         data-text="sign_in_with"
         data-shape="rectangular"
         data-logo_alignment="left">
    </div>

    <div id="response" style="margin-top: 20px;"></div>

    <script>
        function handleCredentialResponse(response) {
            // Display the token
            document.getElementById('response').innerHTML = 
                '<h3>Google ID Token:</h3>' +
                '<pre>' + response.credential + '</pre>' +
                '<p>Copy this token and use it in your Postman request:</p>' +
                '<pre>POST http://localhost:5001/api/auth/google-login\nContent-Type: application/json\n\n{\n    "token": "' + response.credential + '"\n}</pre>';

            // Send the token to your backend
            fetch('http://localhost:5001/api/auth/google-login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    token: response.credential
                })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('response').innerHTML += 
                    '<h3>Backend Response:</h3>' +
                    '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
            })
            .catch(error => {
                document.getElementById('response').innerHTML += 
                    '<h3>Error:</h3>' +
                    '<pre>' + error.message + '</pre>';
            });
        }
    </script>
</body>
</html> 